<!DOCTYPE html>
<html lang="en">
	
	<head>

		<meta charset="UTF-8">

		<!-- To ensure proper rendering and touch zooming -->
		<meta name="viewport" content="width=device-width, initial-scale=1">
 
		<title> look&amp;feel </title>

		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">


		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

		<!-- Latest compiled and minified JavaScript -->
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

		<link href="profile.css" rel="stylesheet">

<!-- ____________________________________________________ --><link href="sticky-footer-navbar.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">

  </head>

  <body>
    
    <header id="content-top">


      <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container-fluid">
          <!-- Brand and toggle get grouped for better mobile display -->
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a id="logo-box" class="navbar-brand verticalLine" href="index.html"><h1>look&amp;feel</h1></a>
          </div>

          <!-- Collect the nav links, forms, and other content for toggling -->
          <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            
            <ul class="nav navbar-nav">
              <li id="women"><a id="women-link" href="#">Mujeres</a></li>
              <li id="men"><a id="men-link" href="#" class="verticalLine">Hombres</a></li>
              <li id="girls"><a id="girls-link" href="#">Niñas</a></li>
              <li id="boys" class="verticalLine"><a id="boys-link" href="#">Niños</a></li>
              <li id="babies"><a id="babies-link" href="#">Bebés</a></li>
            </ul>

            <form class="navbar-form navbar-left" role="search">
              <div class="form-group">
                <input id="search_key" type="text" class="form-control search-bar" placeholder="Buscar un producto">
              </div>
              <button id="search" type="button" class="btn btn-default">Ir</button>
            </form>
            
            <ul class="nav navbar-nav navbar-right">
              <li><a id="register" href="register.html">Registrarse</a></li>
              <li class="verticalLine"><a id="login" href="ingresar.html">Ingresar</a></li>
              <li><a id="cart-link" href="#"><img id="cart-img" src="img/cart.png" alt="carrito"></a></li>
              <li id="fav-li"><a id="fav-link" href="#"><img id="fav-img" src="img/fav.png" alt="favoritos"></a></li>
            </ul>
          </div><!-- /.navbar-collapse -->
        </div><!-- /.container-fluid -->
      </nav>
  </header>

<!-- ___________________________________________ -->


		<div class = "container">

			   <!-- Begin no js msg-->
    <!-- ___________________________________________ -->
    <noscript>
      <div class="alert alert-danger" role="alert">
       <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
       <span class="sr-only">Error:</span>
        Es necesario activar JavaScript para que la web funcione correctamente.
      </div>
    </noscript>
    <!-- End no js msg -->
    <!-- ___________________________________________ -->
			<!-- Title -->
			<div class = "row spaced">
				<div class = "col-xs-6">
					<h2 class="page-title"> Mi Perfil </h2>
				</div>
			</div>

			<div class="row">
				<div class="col-xs-12">
					<div class="panel panel-primary">		
						<div class = "row">
							<div class = "col-xs-12">
								<ul class="nav nav-tabs" role="tablist">
									<li role="presentation" id="li-cuenta"><a href="#cuenta" aria-controls="cuenta" role="tab" data-toggle="tab">Datos de Cuenta</a></li>
									<li role="presentation" id="li-personales"><a href="#personales" aria-controls="personales" role="tab" data-toggle="tab">Datos Personales</a></li>
									<li role="presentation" id="li-domicilios"><a href="#domicilios" aria-controls="domicilios" role="tab" data-toggle="tab">Domicilios</a></li>
									<li role="presentation" id="li-tarjetas"><a href="#tarjetas" aria-controls="tarjetas" role="tab" data-toggle="tab">Tarjetas de Crédito</a></li>
									<li role="presentation" id="li-pedidos"><a href="#pedidos" aria-controls="pedidos" role="tab" data-toggle="tab">Mis Compras</a></li>
								</ul>
							</div>
						</div>

						<div class="tab-content">				
						    <div role="tabpanel" class="tab-pane" id="cuenta">
						    	<div class="row">
							    	<div class="col-xs-12">
							    		<div class = "row spaced">
												<div class = "col-xs-3">
													<p> Nombre de Usuario: </p>	
												</div>
												<div class = "col-xs-6" >
													<p class="cuenta"></p>
												</div>
								    	</div>
								    	<div class = "row spaced">
												<div class = "col-xs-3">
													<p> Email: </p>			
												</div>
												<div class = "col-xs-6" >
													<p class="cuenta" id="email_value"></p>
												</div>
								    	</div>
								    	<div class = "row spaced">
												<div class = "col-xs-3">
													<p> Contraseña: </p>
												</div>
												<div class = "col-xs-6" >
													<p class="cuenta"></p>
												</div>
								    	</div>
							    	</div>
							    </div>
						    </div>

							<div role="tabpanel" class="tab-pane" id="personales">
								<div class="row">						
									<div class = "col-xs-12 col-md-6">							
										<div class = "row spaced">
											<div class = "col-xs-6">
												<p> Nombre: </p>
											</div>
											<div class = "col-xs-6">
												<p class="personales"></p>
											</div>
										</div>
										
										<div class = "row spaced">
											<div class = "col-xs-6">
												<p> Apellido: </p>	
											</div>
											<div class = "col-xs-6">
												<p class="personales"></p>	
											</div>
										</div>
										<div class = "row spaced">		
											<div class = "col-xs-6">
												<p> Fecha de Nacimiento: </p>	
											</div>
											<div class = "col-xs-6">

												<p class="personales"></p>	
											</div>
										</div>
									</div>								
									<div class = "col-xs-12 col-md-6">
										<div class = "row spaced">		
											<div class = "col-xs-6">
													<p> Género: </p>	
											</div>
											<div class = "col-xs-6">
												<p class="personales"></p>	
											</div>
										</div>		
										<div class = "row spaced">		
											<div class = "col-xs-6">
												<p> Tipo de Identificación: </p>	
											</div>
											<div class = "col-xs-6">
												<p class="personales"></p>	
											</div>
										</div>
										<div class = "row spaced">		
											<div class = "col-xs-6">
													<p> Número: </p>	
											</div>
											<div class = "col-xs-6">
												<p class="personales"></p>	
											</div>
										</div>
									</div>
								</div>
									<div class="row">
						    			<div class="col-xs-12">
						    				<hr class="hr_horizontal">
						    			</div>
						    		</div>
						    		<div class="row">
										<div class="col-xs-3"></div>
										<div class ="col-xs-6">
											<button type="button" class="btn btn-sm btn-warning btn-block extra" id="mod-personales">Modificar Datos</button>
										</div>
									</div>	
						    </div>
						    <div role="tabpanel" class="tab-pane" id="domicilios">
						    	<div class="row" id="addresses-table">
								</div>
								<div class="row">
						    		<div class="col-xs-6 col-xs-offset-3">
				    					
				    					<button type="button" class="btn btn-sm btn-primary btn-block extra" data-toggle="collapse" data-target="#secondAccordion" aria-expanded="false" aria-controls="secondAccordion">Agregar Domicilio</button>
										
										<!--
				    					<button type="button" class="btn btn-sm btn-primary btn-block extra">Agregar Domicilio</button>-->
				    				</div>
				    				<div class="col-xs-3">
				    				</div>
						    	</div>
						  		<!-- New Address, Button--> 
						   		<div class = "row">
						    		<div class="col-x-12 col-xs-offset-3 panel-collapse collapse" id="secondAccordion">
						    			<div class="row">
							            	<div class="col-xs-8 col-xs-offset-3 datos_de_cuenta thumbnail">
							            		<div class="row spaced">
													<div class="col-xs-2">
														<p class="question2">Nombre:<span class="rojito">*</span></p>
													</div>
													<div class="col-xs-9">
														<p><input id="addr_name" class="form-control pull-right" type="text" name="Nombre" value=""></p>
													</div>
												</div>
												<div class="col-xs-12 collapse" id="collapse_addr_name">
													<p class="rojito">El nombre es inválido.</p>
												</div>
							              		<div class="row spaced">
													<div class="col-xs-2">
														<p class="question2">Provincia:<span class="rojito">*</span></p>
													</div>
													<div class="col-xs-9">
														<p><input id="addr_prov" class="form-control pull-right" type="text" name="Nombre" value=""></p>
													</div>
												</div>
												<div class="col-xs-12 collapse" id="collapse_addr_prov">
													<p class="rojito">La provincia no es válida</p>
												</div>
												<div class="row spaced">
													<div class="col-xs-2">
														<p class="question2">Ciudad:<span class="rojito">*</span></p>
													</div>
													<div class="col-xs-9">
														<p><input id="addr_city" class="form-control pull-right" type="text" name="Nombre" value=""></p>
													</div>
												</div>
												<div class="col-xs-12 collapse" id="collapse_addr_city">
													<p class="rojito">La ciudad no es válida</p>
												</div>
												<div class="row spaced">
													<div class="col-xs-2">
														<p class="question2">Teléfono:<span class="rojito">*</span></p>
													</div>
													<div class="col-xs-9">
														<p><input id="addr_phone" class="form-control pull-right" type="text" name="Nombre" value=""></p>
													</div>
												</div>
												<div class="col-xs-12 collapse" id="collapse_addr_phone">
													<p class="rojito">El teléfono no debe contener ni '011' ni '-'.</p>
												</div>
												<div class="row spaced">
													<div class="col-xs-2">
														<p class="question2">Código Postal:<span class="rojito">*</span></p>
													</div>
													<div class="col-xs-9">
														<p><input id="addr_zipCode" class="form-control pull-right" type="text" name="Nombre" value=""></p>
													</div>
												</div>
												<div class="col-xs-12 collapse" id="collapse_addr_zipCode">
													<p class="rojito">El código postal es inválido</p>
												</div>
												<div class="row spaced">
													<div class="col-xs-2">
														<p class="question2">Calle:<span class="rojito">*</span></p>
													</div>
													<div class="col-xs-9">
														<p><input id="addr_street" class="form-control pull-right" type="text" name="Nombre" value=""></p>
													</div>
												</div>
												<div class="col-xs-12 collapse" id="collapse_addr_street">
													<p class="rojito">La calle es inválida.</p>
												</div>
												<div class="row spaced">
													<div class="col-md-2">
														<p class="question2">Altura:<span class="rojito">*</span></p>
													</div>
													<div class="col-md-9">
														<p><input id="addr_heigth" class="form-control pull-right" type="text" name="Nombre" value=""></p>
													</div>
												</div>
												<div class="col-xs-12 collapse" id="collapse_addr_heigth">
													<p class="rojito">La altura es inválida.</p>
												</div>
												<div class="row spaced">
													<div class="col-md-2">
														<p class="question2">Piso:</p>
													</div>
													<div class="col-md-3">
														<p><input id="addr_floor" class="form-control pull-right" type="text" name="Nombre" value=""></p>
													</div>
													<div class="col-md-3 ">
														<p class="question2">Departamento:</p>
													</div>
													<div class="col-md-3">
														<p><input id="addr_gate" class="form-control pull-right" type="text" name="Nombre" value=""></p>
													</div>
												</div>
												<div class="col-xs-12 collapse" id="collapse_addr_floor">
													<p class="rojito">El piso o el departamento son inválidos.</p>
												</div>
												<div class="row">
									       			<div class="col-xs-8 col-xs-offset-2">
									       				<button id="ADD_ADDR" type='button' class='btn btn-sm btn-block btn-success extra'>Confirmar</button>
									       			</div>
									       		</div>
									       		<div class="col-xs-12 collapse" id="collapse_add_addr">
													<p class="rojito centered">Faltan completar datos.</p>
												</div>
							            	</div>
						       			</div>
						       		</div>
						       	</div>
						       	<!--END-->
						    </div>
						    <div role="tabpanel" class="tab-pane" id="tarjetas">
						    	<div class="row" id="cards-table">
								</div>
								<div class="row">
						    				<div class="col-xs-6 col-xs-offset-3">
				    							<button id="ADD_CARD" type="button" class="btn btn-sm btn-primary btn-block extra" data-toggle="collapse" data-target="#sixthAccordion" aria-expanded="false" aria-controls="sixthAccordion" >Agregar Tarjeta</button>
				    						</div>
				    					<div class="col-xs-3">
				    					</div>	
						    	</div>

						    	<!-- New Card, Button -->
						    	<div class = "row">
							    	<div class="col-xs-12 col-xs-offset-2 panel-collapse collapse" id="sixthAccordion">
							            <div class="row">
							            	<div class="col-xs-8 col-xs-offset-2 datos_de_cuenta thumbnail">
												<div class="row spaced">
													<div class="col-xs-4">
														<p class="question2">Número:<span class="rojito">*</span></p>
													</div>
													<div class="col-xs-7">
														<p><input id="cart_number" class="form-control pull-right" type="text" name="Nombre" value=""></p>
													</div>
												</div>
												<div class="col-xs-12 collapse" id="collapse_cart_number">
													<p class="rojito">El número no debe contener '-' y tener 16 caracteres.</p>
												</div>
												<div class="row spaced">
													<div class="col-xs-4">
														<p class="question2">Código de Seguridad:<span class="rojito">*</span></p>
													</div>
													<div class="col-xs-7">
														<p><input id="cart_cod" class="form-control pull-right" type="password" name="Nombre" value=""></p>
													</div>
												</div>
												<div class="col-xs-12 collapse" id="collapse_cart_cod">
													<p class="rojito">El código debe tener 3 caracteres.</p>
												</div>
												<div class="row spaced">
													<div class="col-xs-4">
														<p class="question2">Fecha de Vencimiento:<span class="rojito">*</span></p>
													</div>
													<div class="col-xs-8">
														<div class="row">
															<div class="col-xs-5">
																<div class="dropdown">
									  								<button class="btn btn-md btn-default dropdown-toggle btn-block" type="button" data-toggle="dropdown">Mes
									 								<span class="caret"></span></button>
									 								<ul id="MONTH" class="dropdown-menu listElem">
																		<li><a class="month1">Enero</a></li>
																		<li><a class="month3">Febrero</a></li>
																		<li><a class="month1">Marzo</a></li>
																		<li><a class="month2">Abril</a></li>
																		<li><a class="month1">Mayo</a></li>
																		<li><a class="month2">Junio</a></li>
																		<li><a class="month1">Julio</a></li>
																		<li><a class="month1">Agosto</a></li>
																		<li><a class="month2">Septiembre</a></li>
																		<li><a class="month1">Octubre</a></li>
																		<li><a class="month2">Noviembre</a></li>
																		<li><a class="month1">Diciembre</a></li>
																	</ul>
																</div>
															</div>
															<div class="col-xs-5">
																<div class="dropdown">
									  								<button class="btn btn-md dropdown-toggle btn-default btn-block" type="button" data-toggle="dropdown">Año
									 								<span class="caret"></span></button>
									 								<ul id="YEARS" class="dropdown-menu listElem">
																		
																	</ul>
																</div>
															</div>
														</div>	
													</div>
												</div>
												<div class="col-xs-12 collapse" id="collapse_cart_date">
													<p class="rojito">La fecha no es vádida o la tarjeta esta vencida.</p>
												</div>
												<div class="row">
									       			<div class="col-xs-6 col-xs-offset-3">
									       				<button id="ADD_CART" type='button' class='btn btn-sm btn-block btn-success extra'>Confirmar</button>
									       			</div>
									       		</div>
									       		<div class="col-xs-12 collapse" id="collapse_add_cart">
													<p class="rojito centered">Faltan completar datos.</p>
												</div>	
							            	</div>
							       		</div>
							       	</div>
						       </div>
						       <!-- End New Card, Button -->
						    </div>
						    <div role="tabpanel" class="tab-pane" id="pedidos">			
						    	<div class="row">	
						    		<div class="col-xs-12">	    	
								    	<div class="row row-eq-height">
								    		<div class="col-xs-2 verticalLine centered">
								    			<p><strong>Nro. de Ticket</strong></p>
								    		</div>
								    		<div class="col-xs-10 verticalLine centered">
								    			<p><strong>Datos de Compra</strong></p>
								    		</div>
								    	</div>
								    	
										<div class="row">
											<div class="col-xs-12"  id="orders-table">
											
											</div>
										</div>	
									</div>	
								</div>	
						    </div>							    
						</div>					
					</div>
				</div>
			</div>
		</div>

		  <!-- ___________________________________________________ -->
    <footer class="footer">
      <div class="container footer-cont">

        <div class="row">

          <div class="col-xs-6 col-sm-6 col-md-8">
            <div class="row">

              <div class="col-xs-12 col-sm-12 col-md-6"> <!---->
                <div class="row">
                  <div class="col-xs-6 col-sm-6 col-md-6 col1">
                    <div class="footer-text">
                      <p class="text-muted">
                        <b>Seguinos</b>
                      </p>
                        <ul>
                          <li><a href="http://facebook.com" target="_blank">Facebook</a></li>
                          <li><a href="http://twitter.com" target="_blank">Twitter</a></li>
                          <li><a href="http://instagram.com" target="_blank">Instagram</a></li>
                          <li><a href="https://plus.google.com" target="_blank">Google+</a></li>
                          <li><a href="https://www.youtube.com" target="_blank">Youtube</a></li>
                        </ul>
                    </div>
                  </div>
                

                  <div class="col-xs-6 col-sm-6 col-md-6 col2">
                    <div class="footer-text">
                      <p class="text-muted">
                        <b>Empresa</b>
                      </p>
                        <ul>
                          <li><a href="en_construccion.html">¿Quienes somos?</a></li>
                          <li><a href="en_construccion.html">Términos y condiciones</a></li>
                        </ul>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="col-xs-12 col-sm-12 col-md-6"> <!---->  
                <div class="row">
                  <div class="col-xs-6 col-sm-6 col-md-6 col3">
                     <div class="footer-text">
                      <p class="text-muted">
                        <b>Ayuda</b>
                      </p>
                        <ul>
                          <li><a href="en_construccion.html">Atención al cliente</a></li>
                          <li><a href="faq.html">Preguntas frecuentes</a></li>
                        </ul>
                    </div>
                  </div>
                  
                  <div class="col-xs-6 col-sm-6 col-md-6 col4">
                   <div class="footer-text">
                    <p class="text-muted">
                      <b></b>
                    </p>
                      <ul>
                        <li><a href="http://www.visa.com.ar/" target="_blank"></a></li>
                        <li><a href="https://www.masterconsultas.com.ar/" target="_blank"></a></li>
                        <li><a href="https://www.americanexpress.com/ar/" target="_blank"></a></li>
                        <li><a href="http://www.mastercard.com/ar/consumidores/maestro.html" target="_blank"></a></li>
                        <li><a href="http://www.cabal.coop/" target="_blank"></a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>

            </div>
          </div>
          
          <div class="col-xs-6 col-sm-6 col-md-3 col-md-offset-1 -col5">
            <div class="footer-buy-button">
              <!--<p class="text-muted">-->
                <button id="howtobuy" class="btn btn-default howtobuy" type="button">
                  ¿Cómo comprar?
                </button>
              <!--</p>-->
            </div>
          </div>

        </div>

      </div>
    </footer>


		<!--TODO: REMOVE SCRIPT: row-eq-height-js-->
		<script src="index.js"></script>
		<script src="cookies.js"></script>
		<script src="API.js"></script>
		<script src="cart.js"></script>
		<script src="profile.js"></script>
		<script src="validations.js"></script>
		<script>

			$( document ).ready(function() {
			   	
			///////////////////////////
			    floads();

			    if (isLogged()){
			      var fav_q = localStorage.getItem('countItem');
			      if (fav_q == null || fav_q == "null")
			        localStorage.setItem('countItem', 0);

			      $('#fav-link').append('(' + fav_q + ')');

			      getCartLength(
			        function(length){
			           $('#cart-link').append('(' + length + ')');
			        },
			        function(){
			          //KillLoader();
			        });

			    } else {
			      //KillLoader();
			    }
				    /////////////////////////////////


			   	/* Funcion para loguearse (Despues la reemplazamos por el SignIn)*/

			    var f = function(arr){
	
			    	var token = arr["authenticationToken"];
			    	var username = arr["account"].username;
			    	
			    	if (typeof(Storage) !== "undefined") {
					    localStorage.setItem("token", token);
					    localStorage.setItem("username", username);
					  
					} else {
					    document.getElementById("result").innerHTML = "Sorry, your browser does not support Web Storage...";
					}

			    };

			    var url = "http://eiffel.itba.edu.ar/hci/service3/Account.groovy?method=SignIn&username=harry06&password=bebeputo";

			   
			    APIAction(url,f);
			   
				/*Verify User is logged

				if(isLogged == false){
					window.location="index.html";
				}*/

				/*  End LogIn*/

				/* Select active Tab*/

				var activeTab;
				var tabsArr = ["cuenta","personales","domicilios","tarjetas","pedidos"];
				var flag = false;
				
				for(var i=0; i<tabsArr.length && !flag; i++){
					
					if( tabsArr[i].localeCompare(getParameterByName("activeTab")) == 0){
						$("#li-"+ tabsArr[i]).addClass("active");
						$("#"+ tabsArr[i]).addClass("active");
						flag = true;
					}
				}
				if(!flag){
					$("#li-cuenta").addClass("active");
					$("#cuenta").addClass("active");
				}

				/* Load Tab Contents */
				loadOrders();
				loadPersonalData();
				loadCreditCards();
				loadAddresses();

				/* Set row_eq_height*/

			    var heights = $(".row_eq_height_js").map(function() {
			        return $(this).height();
			    }).get(),

			    maxHeight = Math.max.apply(null, heights);

			    $(".row_eq_height_js").height(maxHeight);

				/* Button Events */
	
				//TODO: Move into loadPersonalData()
				$("#mod-personales").on('click', function(){
					var values = $('.personales');
					var values2 = $('.cuenta');
					var path = "modificar.html?";					
					path += "name=" + values[0].innerHTML;
					path += "&lastname=" + values[1].innerHTML;
					path += "&date=" + values[2].innerHTML;
					path += "&sex=" + values[3].innerHTML;
					path += "&ID=" + values[4].innerHTML;
					path += "&number=" + values[5].innerHTML;
					window.location = path;

				});

				/* Add Card Button*/
				valid_cart_date = false;
				valid_cart_cod = false;
				valid_cart_number = false;

				function newAddress(arr){
					//window.location = "profile.html?activeTab=domicilios";
				}
				function newCard(arr){
					window.location = "profile.html?activeTab=tarjetas";
				}

				for(var x=2016;x<2030;x++){
					aux2=$("<li><a>"+x+"</a></li>");
					$("#YEARS").append(aux2);
				}

				$(".dropdown-menu").on('click','li',function(){
					var selText = $(this).text();
					$(this).parents('.dropdown').find('.dropdown-toggle').text(selText);
					$(this).parents('.dropdown').find('.dropdown-toggle').append('<span class="caret"></span>');
				});


				$("#cart_number").focusout(function(){
					 cart_number = document.getElementById("cart_number").value;
					if(validate_number(cart_number)){
						valid_cart_number=true;
						$("#collapse_cart_number").collapse('hide');
					}else{
						$("#collapse_cart_number").collapse('show');
					}
				});
				$("#cart_cod").focusout(function(){
					 cart_cod = document.getElementById("cart_cod").value;
					if(validate_cod(cart_cod)){
						valid_cart_cod=true;
						$("#collapse_cart_cod").collapse('hide');
					}else{
						$("#collapse_cart_cod").collapse('show');
					}
				});

				$("#ADD_CART").on('click',function(){
					var year;
					var month;
					month = $("#MONTH").parents(".dropdown").find("button").text();
				  	year = $("#YEARS").parents(".dropdown").find("button").text();
				  	var d = new Date();
				  	if(month.localeCompare("Mes")==0 || year.localeCompare("Año")==0){
				  		$("#collapse_cart_date").collapse('show');
				  		valid_cart_date = false;
				  	}else{
				  		valid_cart_date=true;
				  		if(d.getFullYear()==year){
				  			if(d.getMonth()<=convertMonth(month)){
				  				valid_cart_date=false;
				  			}
				  		}
				  		else if(d.getFullYear()<year){
				  			valid_date=false;
				  		}
				  	}
				  	if(!valid_cart_date){
				  		$("#collapse_cart_date").collapse('show');
				  	}else{
				  		if(valid_cart_date && valid_cart_cod && valid_cart_number){
				  			$("#collapse_add_cart").collapse('hide');
				  			cart_date=convertMonthToString(month)+year[2]+year[3];
				  			valid_cart=true;
				  			url='http://eiffel.itba.edu.ar/hci/service3/Account.groovy?method=CreateCreditCard&username='+localStorage.getItem("username")+'&authentication_token='+localStorage.getItem("token")+'&credit_card={"number":"'+cart_number+'","expirationDate":"'+cart_date+'","securityCode":"'+cart_cod+'"}';
				  			
				  			APIAction(url,newCard);

				  		}else{
				  		$("#collapse_add_cart").collapse('show');
				  		}
				  	}
				});

				/* Add Address Button */
				valid_addr_floor = true;
				valid_addr_gate = true;
				addr_floor = null;
				addr_gate = null;
				
				valid_addr_name = false;
				valid_addr_phone = false;
				valid_addr_heigth = false;
				valid_addr_city = false;
				valid_addr_street = false;
				valid_addr_prov = false;
				valid_addr_zipCode = false;
				
				$("#addr_name").focusout(function(){
					 addr_name = document.getElementById("addr_name").value;
					if(validate_Names(addr_name)){
						valid_addr_name=true;
						$("#collapse_addr_name").collapse('hide');
					}else{
						$("#collapse_addr_name").collapse('show');
					}
				});

			    $("#addr_prov").focusout(function(){
					addr_prov = document.getElementById("addr_prov").value;
					validate_prov();
					
				});

				$("#addr_city").focusout(function(){
					 addr_city = document.getElementById("addr_city").value;
					if(validate_Names(addr_city)){
						valid_addr_city=true;
						$("#collapse_addr_city").collapse('hide');
					}else{
						$("#collapse_addr_city").collapse('show');
					}
				});
				$("#addr_street").focusout(function(){
					 addr_street = document.getElementById("addr_street").value;
					if(validate_Names(addr_street)){
						valid_addr_street=true;
						$("#collapse_addr_street").collapse('hide');
					}else{
						$("#collapse_addr_street").collapse('show');
					}
				});
				$("#addr_phone").focusout(function(){
					 addr_phone = document.getElementById("addr_phone").value;
					if(validate_phone(addr_phone)){
						valid_addr_phone=true;
						$("#collapse_addr_phone").collapse('hide');
					}else{
						$("#collapse_addr_phone").collapse('show');
					}
				});
				$("#addr_heigth").focusout(function(){
					 addr_heigth = document.getElementById("addr_heigth").value;
					if(validate_phone(addr_heigth)){
						valid_addr_heigth=true;
						$("#collapse_addr_heigth").collapse('hide');
					}else{
						$("#collapse_addr_heigth").collapse('show');
					}
				});
				$("#addr_zipCode").focusout(function(){
					 addr_zipCode = document.getElementById("addr_zipCode").value;
					if(validate_zipCod(addr_zipCode)){
						valid_addr_zipCode=true;
						$("#collapse_addr_zipCode").collapse('hide');
					}else{
						$("#collapse_addr_zipCode").collapse('show');
					}
				});
				$("#addr_floor").focusout(function(){
					 addr_floor = document.getElementById("addr_floor").value;
					if(validate_floor(addr_floor)){
						valid_addr_floor=true;
						$("#collapse_addr_floor").collapse('hide');
					}else{
						$("#collapse_addr_floor").collapse('show');
					}
				});

				$("#addr_gate").focusout(function(){
					 addr_gate = document.getElementById("addr_gate").value;
					if(validate_gate(addr_gate)){
						valid_addr_gate=true;
						$("#collapse_addr_gate").collapse('hide');
					}else{
						$("#collapse_addr_gate").collapse('show');
					}
				});

				$("#ADD_ADDR").on('click',function(){
					username = localStorage.getItem("username");
					token = localStorage.getItem("token");
					
					if(valid_addr_name && valid_addr_phone && valid_addr_heigth && valid_addr_city && valid_addr_street && valid_addr_prov && valid_addr_gate && valid_addr_floor && valid_addr_zipCode){
						$("#collapse_add_addr").collapse('hide');
						valid_addr=true;
						if(addr_floor != null && addr_gate != null){

							url='http://eiffel.itba.edu.ar/hci/service3/Account.groovy?method=CreateAddress&username='+username+'&authentication_token='+token+'&address={"name":"'+addr_name+'","street":"'+addr_street+'","number":"'+addr_heigth+'","floor":"'+addr_floor+'","gate":"'+addr_gate+'","province":"'+addr_prov+'","city":"'+addr_city+'","zipCode":"'+addr_zipCode+'","phoneNumber":"'+addr_phone+'"}';
						}
						else{

							url='http://eiffel.itba.edu.ar/hci/service3/Account.groovy?method=CreateAddress&username='+username+'&authentication_token='+token+'&address={"name":"'+addr_name+'","street":"'+addr_street+'","number":"'+addr_heigth+'","province":"'+addr_prov+'","city":"'+addr_city+'","zipCode":"'+addr_zipCode+'","phoneNumber":"'+addr_phone+'"}';
						}
						
						APIAction(url,newAddress);
			  		}else{
			  			$("#collapse_add_addr").collapse('show');
			  		}

				});				
			});
		</script>		
	</body>
</html>
